# Shopping Cart
本案例展示如何使用Phoenix构建简单的购物车。它包含两个领域，一个是管理购物车的购物车服务，另一个用于管理库存的库存服务。两个领域的代码实现在一个工程内，当然代码之前通过Phoenix调用不会存在直接调用关系，如果需要可以很容易对每个服务独立部署。

**购物车服务**是有状态，管理购物车本身的状态。对状态实现添加和删除商品的功能。在查看购物车时，需要获取到商品的剩余数量是否可以购买（涉及从库存服务中中获取商品余量)

**库存**服务管理商品库存的余量，实现入库和出库的操作。


## 购物车服务

业务场景中，可以对购物车增加或删除商品，可以识别到商品是一个`实体`，而购物车是一个`聚合跟`。购物车是属于用户的，所以购物车的属性包含用户ID。

### 领域对象分析

|对象类型|对象名|类名|状态|职责|
|---|---|---|---|---|
|聚合跟|购物车|ShoppingCartAggregate|所属用户、包含商品和数量|增加、删除商品|
|实体|商品|Item|商品ID、名称、添加时价格|只存在添加获取删除商品ID、名称，不修改|


### 接口说明

1. 获取某个用户的购物车的商品列表(需要判定是否可以购买)。
2. 增加购物撤的商品。
3. 删除购物车的商品。


## 库存服务

业务场景中，库存服务可以对某个商品的库存进行加减，这里商品的状态可以只是ID，也可以包含商品的详细信息，这取决于库存服务是否提供本身的商品信息管理功能。

### 领域对象分析
|对象类型|对象名|类名|状态|职责|
|---|---|---|---|---|
|聚合跟|库存|InventoryAggregate|商品ID，商品库存|出库入库某个商品数量|


### 接口说明

1. 对某个商品进行出库或入库操作

2. 查看某个商品的是否可以购买(判断购买数量是是否大于库存)






